[tox]
env_list =
    format
    type
    py311
minversion = 4.11.3
pass_env = TEST_WEBHOOK_URL HASH_SEED

[gh-actions]
python =
    3.11: py311, format, type

[testenv:format]
basepython = python3.11
description = format (black) and lint (ruff)
deps =
    black>=23.9.1
    ruff>=0.0.291
skip_install = true
commands =
    black src tests
    ruff src tests

[testenv:type]
basepython = python3.11
description = run mypy only on src/
deps =
    -r requirements.txt
    mypy>=1.5.1
commands =
    mypy src


[testenv]
description = run the tests with pytest
package = wheel
wheel_build_env = .pkg
deps =
    -r requirements.txt
    -r requirements_dev.txt
    pytest>=7.4.2
commands =
    pytest {tty:--color=yes}
